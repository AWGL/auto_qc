{% extends "auto_qc/base.html" %}

{% block content %}
<div class="container">
    <h2>Export Sample Data</h2>
    <p>Select assay type and date range to export sample data as CSV</p>
    
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="{{ form.assay_type.id_for_label }}">Assay Type:</label>
            <div class="multi-column-options">
                {% for choice in form.assay_type.field.choices %}
                    <div class="option-item">
                        <input type="{% if form.assay_type.field.widget.allow_multiple_selected %}checkbox{% else %}radio{% endif %}" 
                               name="{{ form.assay_type.name }}" 
                               id="{{ form.assay_type.id_for_label }}_{{ forloop.counter }}" 
                               value="{{ choice.0 }}"
                               {% if choice.0 in form.assay_type.value|default:'' %}checked{% endif %}>
                        <label for="{{ form.assay_type.id_for_label }}_{{ forloop.counter }}">{{ choice.1 }}</label>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="form-group">
            <label for="{{ form.start_date.id_for_label }}">Start Date:</label>
            {{ form.start_date }}
        </div>
        
        <div class="form-group">
            <label for="{{ form.end_date.id_for_label }}">End Date:</label>
            {{ form.end_date }}
        </div>
        
        <button type="submit" class="btn btn-primary">Export CSV</button>
    </form>
</div>

<style>
    .multi-column-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* Creates 3 columns */
        gap: 0px;
    }
    
    /* For responsive behavior */
    @media (max-width: 768px) {
        .multi-column-options {
            grid-template-columns: repeat(2, 1fr); /* Switch to 2 columns on smaller screens */
        }
    }
    
    @media (max-width: 480px) {
        .multi-column-options {
            grid-template-columns: 1fr; /* Switch to 1 column on very small screens */
        }
    }
    
    .option-item {
        margin-bottom: 5px;
    }
</style>
{% endblock %}